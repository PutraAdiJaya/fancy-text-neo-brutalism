import * as vscode from 'vscode';
import * as path from 'path';

export function activate(context: vscode.ExtensionContext) {
  console.log('Fancy Text Styler extension is activating...');
  
  const provider = new FancyTextViewProvider(context);

  context.subscriptions.push(
    vscode.window.registerWebviewViewProvider('fancyText-view', provider)
  );

  context.subscriptions.push(
    vscode.commands.registerCommand('fancyText.open', async () => {
      await vscode.commands.executeCommand('workbench.view.extension.fancyText-container');
    })
  );

  context.subscriptions.push(
    vscode.commands.registerCommand('fancyText.insertSelection', async () => {
      const editor = vscode.window.activeTextEditor;
      const selected = editor && !editor.selection.isEmpty
        ? editor.document.getText(editor.selection)
        : (await vscode.window.showInputBox({ prompt: 'Enter text to style' })) || '';
      provider.postPrefill(selected);
      await vscode.commands.executeCommand('workbench.view.extension.fancyText-container');
    })
  );
  
  console.log('Fancy Text Styler extension activated');
}

export function deactivate() {}
